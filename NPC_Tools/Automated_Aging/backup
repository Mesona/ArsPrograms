package main

import (
	"bufio"
	"fmt"
	"log"
	"math/rand"
	"os"
	"strconv"
	"strings"
	"time"
)

var globalBonus int

//name, age, decInt, decPer, decStr, decSta, decPre, decCom, decDex, decQui
func ageCalculation(stats []string) string {
	fmt.Print(stats)
	personalBonus, _ := strconv.Atoi(stats[2])

	rollMult := 1
	ageRoll := diceRoll(10)
	for ageRoll == 10 {
		rollMult++
		ageRoll = diceRoll(10)
	}
	ageTotal := ageRoll*rollMult - globalBonus - personalBonus

	fmt.Print("Die roll: ", ageRoll, "\n")
	fmt.Print("Age Multiplier: ", rollMult, "\n")
	fmt.Print("Age roll: ", ageTotal, "\n")
	return "yeah, I guess"
}

func diceRoll(diceType int) int {
	rand.Seed(time.Now().UnixNano())
	return rand.Intn(diceType) + 1
}

func main() {
	file, err := os.Open("ages.txt")
	if err != nil {
		log.Fatal(err)
	}
	defer file.Close()

	scanner := bufio.NewScanner(file)
	for scanner.Scan() {
		strSplit := strings.Split(scanner.Text(), ",")
		fmt.Println(strSplit)
		if strSplit[0] == "globalBonus" {
			globalBonus, _ = strconv.Atoi(strSplit[1])
		} else {
			ageCalculation(strSplit)
		}
	}

	if err := scanner.Err(); err != nil {
		log.Fatal(err)
	}
}
